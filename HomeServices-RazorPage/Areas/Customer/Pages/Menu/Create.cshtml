@page
@using HomeServices_RazorPage.Areas.Customer.Pages.Menu
@using Framework
@model CreateModel
@{
}

<link type="text/css" rel="stylesheet" href="~/dist/jalalidatepicker.min.css" />
<script type="text/javascript" src="~/dist/jalalidatepicker.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jalaali-js/dist/jalaali.js"></script>

<div class="goodup-dashboard-wrap gray px-4 py-5">
    <a class="mobNavigation" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="MobNav">
        <i class="fas fa-bars ms-2"></i>منو
    </a>
    <div class="collapse" id="MobNav">
        <div class="goodup-dashboard-nav sticky-top">
            <div class="goodup-dashboard-inner">
                <ul data-submenu-title="منو">
                    <li><a asp-page="Dashboard"><i class="lni lni-dashboard ms-2"></i>داشبورد</a></li>
                    <li><a asp-page="myorders"><i class="lni lni-files ms-2"></i>سفارش های من</a></li>
                </ul>
                <ul data-submenu-title="حساب کاربری">
                    <li><a asp-page="Profile"><i class="lni lni-user ms-2"></i> تنظیمات </a></li>
                    <li><a asp-page="/logout" asp-area=""><i class="lni lni-power-switch ms-2"></i>خروج</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!----------------------------------------->
    <div class="goodup-dashboard-content">
        <div class="dashboard-tlbar d-block mb-5">
            <div class="row">
                <div class="colxl-12 col-lg-12 col-md-12">
                    <h1 class="ft-medium fs-lg">سفارش</h1>
                </div>
            </div>
        </div>
        @if (!string.IsNullOrEmpty(Model.Message))
        {
            <div class="alert alert-info">@Model.Message</div>
        }
        <a class="mobNavigation" data-bs-toggle="collapse" href="#MobNav" role="button" aria-expanded="false" aria-controls="MobNav"></a>
        <div class="col-xl-12 col-lg-2 col-md-12 col-sm-12">
            <div class="submit-form">
                <div class="dashboard-list-wraps bg-white rounded mb-4">
                    <div class="dashboard-list-wraps-head br-bottom py-3 px-3">
                        <div class="dashboard-list-wraps-flx">
                            <h4 class="mb-0 ft-medium fs-md">
                                <i class="fa fa-file ms-2 theme-cl fs-sm"></i>اطلاعات سفارش
                            </h4>
                        </div>
                    </div>

                    <div class="dashboard-list-wraps-body py-3 px-3">
                        <form method="post" asp-page-handler="Create">
                            <div class="row">
                                <!-- Hidden Fields -->
                                <input type="hidden" asp-for="NewOrder.CustomerId" />
                                <input type="hidden" asp-for="NewOrder.HouseWorkId" />

                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="mb-1">عنوان</label>
                                        <input type="text" class="form-control rounded" style="background-color: #f5f5f5;" asp-for="ThisCategory.HouseWorkName" readonly>
                                    </div>
                                </div>

                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label class="mb-1">دسته بندی</label>
                                        <input class="form-control" style="background-color: #f5f5f5;" asp-for="ParentCategory.Title" readonly>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label class="ft-medium small mb-1">انتخاب تاریخ</label>
                                        <div class="cld-box">
                                            <i class="ti-calendar"></i>
                                            <input type="text" data-jdp class="form-control" id="deliveryDate" name="deliveryDate" placeholder="تاریخ رزرو را انتخاب نمایید" value="">
                                        </div>
                                    </div>
                                </div>


                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label class="mb-1">زیر دسته</label>
                                        <input type="text" class="form-control rounded" style="background-color: #f5f5f5;" asp-for="ThisCategory.Title" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label class="mb-1">ساعت اجرا</label>
                                        <select class="form-control chosen-select" asp-for="NewOrder.RunningTime">
                                            <option value="">...</option>
                                            <option value="01:00">1:00 بامداد</option>
                                            <option value="02:00">2:00 بامداد</option>
                                            <option value="03:00">3:00 بامداد</option>
                                            <option value="04:00">4:00 صبح</option>>
                                            <option value="05:00">5:00 صبح</option>
                                            <option value="06:00">6:00 صبح</option>
                                            <option value="07:00">7:00 صبح</option>
                                            <option value="08:00">8:00 صبح</option>
                                            <option value="09:00">9:00 صبح</option>
                                            <option value="10:00">10:00 صبح</option>
                                            <option value="11:00">11:00 صبح</option>
                                            <option value="12:00">12:00 صبح</option>
                                            <option value="13:00">1:00 ظهر</option>
                                            <option value="14:00">2:00 ظهر</option>
                                            <option value="15:00">3:00 عصر</option>
                                            <option value="16:00">4:00 عصر</option>
                                            <option value="17:00">5:00 عصر</option>
                                            <option value="18:00">6:00 شب</option>
                                            <option value="19:00">7:00 شب</option>
                                            <option value="20:00">8:00 شب</option>
                                            <option value="21:00">9:00 شب</option>
                                            <option value="22:00">10:00 شب</option>
                                            <option value="23:00">11:00 شب</option>
                                            <option value="00:00">12:00 شب</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Description -->
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="mb-1">توضیحات</label>
                                        <textarea class="form-control rounded ht-150" asp-for="NewOrder.Description"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row align-items-center justify-content-center">
                                <div class="col-xl-7 col-lg-10 col-md-12 col-sm-12 col-12">
                                    <div class="form-group mb-0 position-relative">
                                        <button type="submit" class="btn full-width btn-height bg-danger text-white fs-md">ثبت</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    jalaliDatepicker.startWatch({
    minDate: "today",
    maxDate: "attr",
    minTime: "attr",
    maxTime: "attr",
    hideAfterChange: true,
    autoHide: true,
    showTodayBtn: true,
    showEmptyBtn: true,
    topSpace: 10,
    bottomSpace: 30,
    dayRendering(opt, input) {
    return {
    isHollyDay: opt.day == 1
    }
    }
    });
</script>


<!-- Initialize Persian Datepicker -->
<script>
    document.querySelector('form').addEventListener('submit', function (event) {
        // Prevent the form from submitting immediately
        event.preventDefault();

        // Get the selected Jalali date
        const jalaliDate = document.getElementById('deliveryDate').value;

        // Convert Jalali date to Gregorian
        const [jalaliYear, jalaliMonth, jalaliDay] = jalaliDate.split('/').map(Number);
        const gregorianDate = jalaali.toGregorian(jalaliYear, jalaliMonth, jalaliDay);

        // Format the Gregorian date as YYYY-MM-DD
        const formattedGregorianDate = `${gregorianDate.gy}-${String(gregorianDate.gm).padStart(2, '0')}-${String(gregorianDate.gd).padStart(2, '0')}`;

        // Set the Gregorian date in a hidden input field
        const hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = 'NewOrder.CompletionDate';
        hiddenInput.value = formattedGregorianDate;
        this.appendChild(hiddenInput);

        // Submit the form
        this.submit();
    });
</script>

@* 

        @page
@using HomeServices_RazorPage.Areas.Customer.Pages.Menu
@using Framework
@model CreateModel
@{
}

<link type="text/css" rel="stylesheet" href="~/dist/jalalidatepicker.min.css" />
<script type="text/javascript" src="~/dist/jalalidatepicker.min.js"></script>


<div class="goodup-dashboard-wrap gray px-4 py-5">
    <a class="mobNavigation" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="MobNav">
        <i class="fas fa-bars ms-2"></i>منو
    </a>
    <div class="collapse" id="MobNav">
        <div class="goodup-dashboard-nav sticky-top">
            <div class="goodup-dashboard-inner">
                <ul data-submenu-title="منو">
                    <li><a asp-page="Dashboard"><i class="lni lni-dashboard ms-2"></i>داشبورد</a></li>
                    <li><a asp-page="myorders"><i class="lni lni-files ms-2"></i>سفارش های من</a></li>
                </ul>
                <ul data-submenu-title="حساب کاربری">
                    <li><a asp-page="Profile"><i class="lni lni-user ms-2"></i> تنظیمات </a></li>
                    <li><a asp-page="/logout" asp-area=""><i class="lni lni-power-switch ms-2"></i>خروج</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!----------------------------------------->
    <div class="goodup-dashboard-content">
        <div class="dashboard-tlbar d-block mb-5">
            <div class="row">
                <div class="colxl-12 col-lg-12 col-md-12">
                    <h1 class="ft-medium fs-lg">سفارش</h1>
                </div>
            </div>
        </div>
        @if (!string.IsNullOrEmpty(Model.Message))
        {
            <div class="alert alert-info">@Model.Message</div>
        }
        <a class="mobNavigation" data-bs-toggle="collapse" href="#MobNav" role="button" aria-expanded="false" aria-controls="MobNav"></a>
        <div class="col-xl-12 col-lg-2 col-md-12 col-sm-12">
            <div class="submit-form">
                <div class="dashboard-list-wraps bg-white rounded mb-4">
                    <div class="dashboard-list-wraps-head br-bottom py-3 px-3">
                        <div class="dashboard-list-wraps-flx">
                            <h4 class="mb-0 ft-medium fs-md">
                                <i class="fa fa-file ms-2 theme-cl fs-sm"></i>اطلاعات سفارش
                            </h4>
                        </div>
                    </div>

                    <div class="dashboard-list-wraps-body py-3 px-3">
                        <form method="post" asp-page-handler="Create">
                            <div class="row">
                                <!-- Hidden Fields -->
                                <input type="hidden" asp-for="NewOrder.CustomerId" />
                                <input type="hidden" asp-for="NewOrder.HouseWorkId" />

                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="mb-1">عنوان</label>
                                        <input type="text" class="form-control rounded" style="background-color: #f5f5f5;" asp-for="ThisCategory.HouseWorkName" readonly>
                                    </div>
                                </div>

                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label class="mb-1">دسته بندی</label>
                                        <input class="form-control" style="background-color: #f5f5f5;" asp-for="ParentCategory.Title" readonly>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label class="ft-medium small mb-1">انتخاب تاریخ</label>
                                        <div class="cld-box">
                                            <i class="ti-calendar"></i>
                                            <input type="date" data-jdp asp-for="@Model.NewOrder.CompletionDate" placeholder="تاریخ رزرو را انتخاب نمایید">
                                        </div>
                                    </div>
                                </div>


                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label class="mb-1">زیر دسته</label>
                                        <input type="text" class="form-control rounded" style="background-color: #f5f5f5;" asp-for="ThisCategory.Title" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label class="mb-1">ساعت اجرا</label>
                                        <select class="form-control chosen-select" asp-for="NewOrder.RunningTime">
                                            <option value="">...</option>
                                            <option value="01:00">1:00 بامداد</option>
                                            <option value="02:00">2:00 بامداد</option>
                                            <option value="03:00">3:00 بامداد</option>
                                            <option value="04:00">4:00 صبح</option>>
                                            <option value="05:00">5:00 صبح</option>
                                            <option value="06:00">6:00 صبح</option>
                                            <option value="07:00">7:00 صبح</option>
                                            <option value="08:00">8:00 صبح</option>
                                            <option value="09:00">9:00 صبح</option>
                                            <option value="10:00">10:00 صبح</option>
                                            <option value="11:00">11:00 صبح</option>
                                            <option value="12:00">12:00 صبح</option>
                                            <option value="13:00">1:00 ظهر</option>
                                            <option value="14:00">2:00 ظهر</option>
                                            <option value="15:00">3:00 عصر</option>
                                            <option value="16:00">4:00 عصر</option>
                                            <option value="17:00">5:00 عصر</option>
                                            <option value="18:00">6:00 شب</option>
                                            <option value="19:00">7:00 شب</option>
                                            <option value="20:00">8:00 شب</option>
                                            <option value="21:00">9:00 شب</option>
                                            <option value="22:00">10:00 شب</option>
                                            <option value="23:00">11:00 شب</option>
                                            <option value="00:00">12:00 شب</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Description -->
                                <div class="col-12">
                                    <div class="form-group">
                                        <label class="mb-1">توضیحات</label>
                                        <textarea class="form-control rounded ht-150" asp-for="NewOrder.Description"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row align-items-center justify-content-center">
                                <div class="col-xl-7 col-lg-10 col-md-12 col-sm-12 col-12">
                                    <div class="form-group mb-0 position-relative">
                                        <button type="submit" class="btn full-width btn-height bg-danger text-white fs-md">ثبت</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    jalaliDatepicker.startWatch({
    minDate: "today",
    maxDate: "attr",
    minTime: "attr",
    maxTime: "attr",
    hideAfterChange: true,
    autoHide: true,
    showTodayBtn: true,
    showEmptyBtn: true,
    topSpace: 10,
    bottomSpace: 30,
    dayRendering(opt, input) {
    return {
    isHollyDay: opt.day == 1
    }
    }
    });
</script>*@