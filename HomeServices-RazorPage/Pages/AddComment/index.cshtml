@page
@using HomeServices_RazorPage.Pages.AddComment
@model IndexModel
@{
}

<div class="bg-white rounded mb-4">
    <div class="jbd-01 px-4 py-4">
        <div class="jbd-details mb-4">
            <h5 class="ft-bold fs-lg">ثبت امتیاز و نظر</h5>
            <div class="review-form-box form-submit mt-3">

                <form method="post">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="form-group mb-3">
                                <label class="ft-medium small mb-1">امتیازدهی</label>
                                <div class="rating-stars">
                                    <span class="star" data-value="1">&#9733;</span>
                                    <span class="star" data-value="2">&#9733;</span>
                                    <span class="star" data-value="3">&#9733;</span>
                                    <span class="star" data-value="4">&#9733;</span>
                                    <span class="star" data-value="5">&#9733;</span>
                                </div>
                                <input type="hidden" asp-for="NewComment.Points" id="ratingValue" />
                                <span asp-validation-for="NewComment.Points" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="form-group mb-3">
                                <label class="ft-medium small mb-1">ثبت نظر</label>
                                <textarea class="form-control rounded ht-140" asp-for="NewComment.Opinion" placeholder="نظر خود را بنویسید"></textarea>
                                <span asp-validation-for="NewComment.Opinion" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="form-group">
                                <button type="submit" class="btn theme-bg text-light rounded">ثبت نظر</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // JavaScript for handling the star rating
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('ratingValue');

    stars.forEach(star => {
        star.addEventListener('click', function () {
            const value = this.getAttribute('data-value');
            ratingInput.value = value;  // Set the hidden input to the selected rating
            updateStars(value);         // Update the star display
        });

        // Optional: Hover effect to change star color
        star.addEventListener('mouseover', function () {
            const value = this.getAttribute('data-value');
            updateStars(value);
        });

        star.addEventListener('mouseout', function () {
            const currentValue = ratingInput.value;
            updateStars(currentValue);
        });
    });

    // Function to update the stars' appearance based on the rating
    function updateStars(rating) {
        stars.forEach(star => {
            if (star.getAttribute('data-value') <= rating) {
                star.classList.add('filled');
            } else {
                star.classList.remove('filled');
            }
        });
    }
</script>

<style>
    .rating-stars {
        display: flex;
        gap: 5px;
        cursor: pointer;
    }

    .star {
        font-size: 30px;
        color: #ddd;
    }

        .star.filled {
            color: gold;
        }
</style>